/*!
        Minimized for polarr_v001 2015-02-01 Production.
*/
var Music;Music=function(){function a(){}return a}();var Scene1;Scene1=function(){function a(a){this.scene=a.scene,this.composer=a.composer,this.camera=a.camera,this.particles=[]}return a.prototype.start=function(){var a;return this.makeParticles(),a=new THREE.ShaderPass(THREE.RGBShiftShader),a.uniforms.amount.value=0,a.renderToScreen=!0,this.composer.addPass(a),setInterval(this.update,1e3/30),this.angle=0,this.radius=10,this.count=0,this.color=0},a.prototype.update=function(){var a,b,c,d,e;if(this.count++,this.count%3===0){for(this.color+=.01,this.color>1&&(this.color=0),d=this.particles,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.position.z+=30,this.angle+=45,this.angle>360&&(this.angle=0),a.material.color.setHSL(this.color,1,.7),e.push(a.position.z>1e3?a.position.z-=2e3:void 0);return e}},a.prototype.makeParticles=function(){var a,b,c,d,e,f;for(e=f=-5e3;5e3>=f;e=f+=20)a=new THREE.SpriteMaterial({color:16777215}),c=THREE.ImageUtils.loadTexture("textures/spark.png"),d=new THREE.SpriteMaterial({map:c,useScreenCoordinates:!1,color:16777215}),b=new THREE.Particle(d),b.material.color.setHSL(1,.7,.6),b.position.x=2e3*Math.random()-1e3,b.position.y=2e3*Math.random()-1e3,b.position.z=e,b.scale.x=b.scale.y=80,this.scene.add(b),this.particles.push(b);return{particleRender:function(a){return a.beginPath(),a.arc(0,0,1,0,2*Math.PI,!0),a.fill()},updateParticles:function(){var a,c,d,e;for(e=[],a=c=0,d=this.particles.length;d>=0?d>c:c>d;a=d>=0?++c:--c)b=this.particles[a],b.position.z+=.1,e.push(b.position.z>1e3?b.position.z-=2e3:void 0);return e}}},a}();var AMOUNTX,AMOUNTY,PI2,SEPARATION,Scene2;SEPARATION=100,AMOUNTX=50,AMOUNTY=50,PI2=2*Math.PI,Scene2=function(){function a(a){this.scene=a.scene,this.composer=a.composer,this.camera=a.camera,this.camera.position.y=1e3,this.camera.position.z=1e3,this.particles=new Array,this.count=0}return a.prototype.start=function(){var a,b,c,d,e,f,g,h;for(a=new THREE.ShaderPass(THREE.RGBShiftShader),a.uniforms.amount.value=.0015,a.renderToScreen=!0,this.composer.addPass(a),e=new THREE.SpriteMaterial({color:16777215}),b=0,h=[],c=g=0;AMOUNTX>=0?AMOUNTX>g:g>AMOUNTX;c=AMOUNTX>=0?++g:--g)h.push(function(){var a,g;for(g=[],d=a=0;AMOUNTY>=0?AMOUNTY>a:a>AMOUNTY;d=AMOUNTY>=0?++a:--a)f=this.particles[b++]=new THREE.Sprite(e),f.position.x=c*SEPARATION-AMOUNTX*SEPARATION/2,f.position.z=d*SEPARATION-AMOUNTY*SEPARATION/2,g.push(this.scene.add(f));return g}.call(this));return h},a.prototype.update=function(){var a,b,c,d,e,f;for(a=0,b=e=0;AMOUNTX>=0?AMOUNTX>e:e>AMOUNTX;b=AMOUNTX>=0?++e:--e)for(c=f=0;AMOUNTY>=0?AMOUNTY>f:f>AMOUNTY;c=AMOUNTY>=0?++f:--f)d=this.particles[a++],d.position.y=50*Math.sin(.3*(b+this.count))+50*Math.sin(.5*(c+this.count)),d.scale.x=d.scale.y=4*(Math.sin(.3*(b+this.count))+1)+4*(Math.sin(.5*(c+this.count))+1);return this.count+=.1},a}();var Visual;Visual=function(){function a(){this.container=document.getElementById("container"),this.camera=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,1,4e3),this.camera.position.z=1e3,this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer,this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer=new THREE.EffectComposer(this.renderer),this.scene2=new Scene2({scene:this.scene,composer:this.composer,camera:this.camera})}return a.prototype.init=function(){return this.container.appendChild(this.renderer.domElement),this.composer.addPass(new THREE.RenderPass(this.scene,this.camera)),this.scene2.start()},a.prototype.render=function(){return requestAnimationFrame(this.render.bind(this)),this.scene2.update(),this.composer.render()},a}();var Visualizer;Visualizer=function(){function a(){this.music=new Music,this.visual=new Visual}return a.prototype.start=function(){return this.visual.init(),this.visual.render()},a}();